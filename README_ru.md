# Scheduler

[![](https://jitpack.io/v/AxieFeat/Scheduler.svg)](https://jitpack.io/#AxieFeat/Scheduler)

[English](README.md) | [Русский](README_ru.md)

Это очень простая библиотека для выполнения задач на основе Coroutines и Java executor.

### Требования
- JDK 21 или выше
- Kotlin

### Установка

1. Укажите репозиторий Jitpack:
```kotlin
repositories {
    maven("https://jitpack.io")
}
```

2. Добавьте зависимость в ваш проект:
```kotlin
dependencies {
    implementation("com.github.AxieFeat:Scheduler:<last version>") // Посмотрите последний релиз сверху README
}
```

### Просто пример использование
Здесь представлен простой пример использования:

```kotlin
fun main() {
    // У этого шедулера есть две реализации - Coroutines и Java executor.
    // Для создания экземпляров шедулера существует класс BasicSchedulerManager, но рекомендуется использование функции .scheduler
    scheduler {} // <- Создаёт шедулер со стандартной реализации (Стандартная - это Coroutines)
    scheduler(SchedulerType.COROUTINES) {} // <- Так же создаст шедулер на Coroutines :/
    scheduler(SchedulerType.EXECUTOR) {} // <- Создаст шедулер на основе Java executor.

    scheduler { // Обратите внимание, что каждый вызов этой функции создаёт новый экземпляр шедулера со своим счетчиком задач!

        // Для выполнения задач существует функция execute, которая возвращает экземпляр SchedulerTask.


        execute { /* Ваш код здесь */ } // Эта функция немедленно выполнит ваш код.

        execute(delay = 1.s()) { /* Ваш код здесь */ } // Эта функция выполнит ваш код через 1 секунду.

        // Эта функция выполнит ваш код через 1.5 секунды, а затем будет выполнять его каждый час.
        execute(delay = 1500.ms(), period = 1.h()) { /* Ваш код здесь */ }

        // Как вы могли заметить здесь, использовались функции .ms, .h, .s для указания времени - вот список всех функций.
        // .ns() -> Наносекунды
        // .us() -> Микросекунды
        // .ms() -> Миллисекунды
        // .s() -> Секунды
        // .m() -> Минуты
        // .h() -> Часы
        // .d() -> Дни
        // Все эти функции являются расширением для класса Number


        val task = execute {} // Вы можете сохранить задачу в переменную и, например, отменить её в будущем.


        // Так же вы можете отменить задачу во время её выполнения.
        var counter = 0
        execute(period = 1500.ms()) {
            counter++
            println(counter)
            if(counter >= 10) {
                this.cancel() // Отмена текущей задачи.
            }
        }
    }

    // По причине, описанной выше, очень рекомендуется
    // создавать экземпляр шедулера и сохранять его в переменную для последующего использования.
    val someScheduler = scheduler {}

    // Затем вы можете выполнять задачи с помощью этого шедулера
    someScheduler.execute {}
}
```